import{It as e,Pt as t,T as n,Vt as r,W as i}from"./vendor_@vue_reactivity@3.6.0-alpha.6-DZKOJXGm.js";import{B as a,M as o,O as s,Rt as c,W as l,en as u,gn as d,j as f,k as p,lt as m,mn as h,pn as g,rr as _,s as v,vn as y,z as b}from"./vendor_@vue_runtime-core@3.6.0-alpha.6-BjE3k_Rr.js";import"./vendor_@vue_runtime-dom@3.6.0-alpha.6-DIxWpe74.js";import"./vendor_@vue_runtime-vapor@3.6.0-alpha.6_@vue_runtime-dom@3.6.0-alpha.6-GqVkSY40.js";import"./vendor_@vueuse_core@12.8.2_typescript@5.9.3-BgEAq90h.js";import{S as x,_ as S,b as C,c as w,g as T,h as E,o as D,t as O,u as k,v as A,y as j}from"./vendor_lucide-vue-next@0.560.0_vue@3.6.0-alpha.6_typescript@5.9.3_-3UY6PXge.js";import"./vendor_@intlify_core-base@11.2.2-Cl5ELC-x.js";import{n as M}from"./vendor_vue-i18n@11.2.2_vue@3.6.0-alpha.6_typescript@5.9.3_-kcvVK7rP.js";import"./vendor_class-variance-authority@0.7.1-l9gClN7L.js";import{f as N,g as P,m as F,p as I}from"./vendor_reka-ui@2.6.1_typescript@5.9.3_vue@3.6.0-alpha.6_typescript@5.9.3_-3vlIfvsL.js";import"./vendor_defu@6.1.4-eyYM9wXL.js";import"./vendor_aria-hidden@1.2.6-Dg_6A3rW.js";import"./vendor_tailwind-merge@3.4.0-Bqsxo7_-.js";import"./vendor_@vueuse_core@14.1.0_vue@3.6.0-alpha.6_typescript@5.9.3_-FWXuLa9m.js";import"./vendor_crypto-js@4.2.0-BOxzFhuU.js";import"./vendor_nanoid@5.1.6-DmYhSqLU.js";import{n as L,r as R,t as z}from"./index-COrlJ7tJ.js";var B=l({__name:`Collapsible`,props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:[`update:open`],setup(t,{emit:n}){let r=P(t,n);return(t,n)=>(u(),p(i(F),c({"data-slot":`collapsible`},i(r)),{default:_(n=>[h(t.$slots,`default`,e(m(n)))]),_:3},16))}}),V=l({__name:`CollapsibleContent`,props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,n)=>(u(),p(i(I),c({"data-slot":`collapsible-content`},t),{default:_(()=>[h(e.$slots,`default`)]),_:3},16))}}),H=l({__name:`CollapsibleTrigger`,props:{asChild:{type:Boolean},as:{}},setup(e){let t=e;return(e,n)=>(u(),p(i(N),c({"data-slot":`collapsible-trigger`},t),{default:_(()=>[h(e.$slots,`default`)]),_:3},16))}}),U={key:1},W={class:t([`flex items-center gap-2 px-2 py-1.5 text-sm rounded-md cursor-pointer hover:bg-accent transition-colors w-full text-left`])},G={class:`truncate`},K={class:`pl-4 border-l border-border/50 ml-2`},q=l({name:`AsarFileTree`,__name:`asar-file-tree`,props:{node:{},selectedPath:{},modifiedFiles:{}},emits:[`select`],setup(e,{emit:c}){let l=e,m=c,h=n(!1),b=`.js,.mjs,.cjs,.ts,.mts,.cts,.jsx,.tsx,.json,.html,.htm,.css,.scss,.sass,.less,.vue,.svelte,.md,.txt,.xml,.yaml,.yml,.env,.gitignore,.sh,.bash,.py,.sql`.split(`,`);function C(){l.node.isDirectory||m(`select`,l.node)}function w(e){return e.path===l.selectedPath}function D(e){return e.modified||(l.modifiedFiles?.has(e.path)??!1)}function O(e){return e.isDirectory?E:k(e.name)?j:S}function k(e){let t=e.substring(e.lastIndexOf(`.`)).toLowerCase();return b.includes(t)}return(n,c)=>{let l=d(`AsarFileTree`,!0);return e.node.isDirectory?(u(),o(`div`,U,[a(i(B),{open:h.value,"onUpdate:open":c[1]||=e=>h.value=e,class:`group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90`},{default:_(()=>[a(i(H),{"as-child":``},{default:_(()=>[s(`button`,W,[a(i(x),{class:`size-4 transition-transform shrink-0`}),h.value?(u(),p(i(T),{key:0,class:`size-4 shrink-0`})):(u(),p(i(E),{key:1,class:`size-4 shrink-0`})),s(`span`,G,r(e.node.name),1)])]),_:1}),a(i(V),null,{default:_(()=>[s(`div`,K,[(u(!0),o(v,null,g(e.node.children,t=>(u(),p(l,{key:t.path,node:t,"selected-path":e.selectedPath,"modified-files":e.modifiedFiles,onSelect:c[0]||=e=>m(`select`,e)},null,8,[`node`,`selected-path`,`modified-files`]))),128))])]),_:1})]),_:1},8,[`open`])])):(u(),o(`div`,{key:0,class:t([`flex items-center gap-2 px-2 py-1.5 text-sm rounded-md cursor-pointer hover:bg-accent transition-colors`,w(e.node)?`bg-accent text-accent-foreground`:``]),onClick:C},[(u(),p(y(O(e.node)),{class:`size-4 shrink-0`})),s(`span`,{class:t([`truncate flex-1`,{"text-orange-500":D(e.node)}])},r(e.node.name),3),D(e.node)?(u(),p(i(A),{key:0,class:`w-3 h-3 text-yellow-500 shrink-0`})):f(``,!0)],2))}}}),J={class:`flex flex-col h-full`},Y={class:`p-4 border-b`},X={class:`flex items-center justify-between`},Z={class:`flex items-center gap-2 min-w-0`},Q={class:`font-semibold truncate`},$={class:`flex-1 overflow-auto p-2`},ee={class:`mb-2`},te={class:`text-xs font-medium text-muted-foreground px-2 py-1`},ne={class:`space-y-0.5`},re={class:`p-4 border-t space-y-2`},ie={key:0,class:`text-xs text-muted-foreground mb-2`},ae=l({__name:`asar-sidebar`,setup(e){let{t}=M(),{fileTree:c,currentFile:l,currentAsar:d,modifiedFiles:m,hasModifications:h,isRepacking:y,openFile:x,resetAllFiles:S,downloadModifiedAsar:T,downloadOriginalAsar:E,closeAsar:A}=L(),j=n(null),N=n(null);function P(e){e.isDirectory||x(e.path)}async function F(){if(h.value)try{await T()}catch(e){console.error(`Download failed:`,e)}else try{await E()}catch(e){console.error(`Download original failed:`,e)}}async function I(){if(await j.value?.show())try{await S()}catch(e){console.error(`Reset failed:`,e)}}async function B(){h.value&&!await N.value?.show()||A()}return(e,n)=>(u(),o(`div`,J,[s(`div`,Y,[s(`div`,X,[s(`div`,Z,[a(i(w),{class:`w-5 h-5 shrink-0`}),s(`span`,Q,r(i(d)?.name),1)]),a(i(R),{variant:`ghost`,size:`icon`,class:`shrink-0`,onClick:B},{default:_(()=>[a(i(O),{class:`size-4`})]),_:1})])]),s(`div`,$,[s(`div`,ee,[s(`div`,te,r(i(t)(`common.files`)),1),s(`div`,ne,[(u(!0),o(v,null,g(i(c),e=>(u(),p(q,{key:e.path,node:e,"selected-path":i(l),"modified-files":i(m),onSelect:P},null,8,[`node`,`selected-path`,`modified-files`]))),128))])])]),s(`div`,re,[i(h)?(u(),o(`div`,ie,r(i(t)(`sidebar.modified`,{count:i(m).size})),1)):f(``,!0),a(i(R),{class:`w-full`,disabled:i(y),onClick:F},{default:_(()=>[i(y)?(u(),p(i(k),{key:0,class:`size-4 animate-spin`})):(u(),p(i(C),{key:1,class:`size-4`})),b(` `+r(i(t)(`common.download`)),1)]),_:1},8,[`disabled`]),i(h)?(u(),p(i(R),{key:1,variant:`destructive`,class:`w-full`,onClick:I},{default:_(()=>[a(i(D),{class:`size-4`}),b(` `+r(i(t)(`sidebar.clearModifications`)),1)]),_:1})):f(``,!0)]),a(z,{ref_key:`clearDialogRef`,ref:j,title:i(t)(`sidebar.clearConfirmTitle`),description:i(t)(`sidebar.clearConfirmDescription`),variant:`destructive`},null,8,[`title`,`description`]),a(z,{ref_key:`closeDialogRef`,ref:N,title:i(t)(`sidebar.closeConfirmTitle`),description:i(t)(`sidebar.closeConfirmDescription`)},null,8,[`title`,`description`])]))}});export{ae as default};
//# sourceMappingURL=asar-sidebar-cCqlnFYS.js.map