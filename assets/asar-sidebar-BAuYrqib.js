import{A as e,B as t,C as n,D as r,E as i,F as a,G as o,H as s,I as c,K as l,L as u,M as d,N as f,O as p,P as m,R as h,S as g,T as _,U as v,V as y,W as b,_ as x,a as S,b as C,c as w,d as T,f as E,g as D,h as ee,i as O,j as k,k as A,l as j,m as M,n as te,o as ne,p as N,r as P,s as F,t as re,u as I,v as L,w as R,x as z,y as B,z as V}from"./index-C9WInhb3.js";var H=D(`camera`,[[`path`,{d:`M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z`,key:`18u6gg`}],[`circle`,{cx:`12`,cy:`13`,r:`3`,key:`1vg3eu`}]]),U=D(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),W=D(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),G=D(`file-code`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10 12.5 8 15l2 2.5`,key:`1tg20x`}],[`path`,{d:`m14 12.5 2 2.5-2 2.5`,key:`yinavb`}]]),K=D(`file-pen`,[[`path`,{d:`M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34`,key:`o6klzx`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}],[`path`,{d:`M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z`,key:`zhnas1`}]]),q=D(`file`,[[`path`,{d:`M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z`,key:`1oefj6`}],[`path`,{d:`M14 2v5a1 1 0 0 0 1 1h5`,key:`wfsgrz`}]]),J=D(`folder`,[[`path`,{d:`M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z`,key:`1kt360`}]]),Y=D(`package-open`,[[`path`,{d:`M12 22v-9`,key:`x3hkom`}],[`path`,{d:`M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z`,key:`2ntwy6`}],[`path`,{d:`M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13`,key:`1pmm1c`}],[`path`,{d:`M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z`,key:`12ttoo`}]]),X=D(`rotate-ccw`,[[`path`,{d:`M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8`,key:`1357e3`}],[`path`,{d:`M3 3v5h5`,key:`1xhq8a`}]]),ie=D(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]);function ae(e,t){let n=y(e);function r(e){return t[n.value][e]??n.value}return{state:n,dispatch:e=>{n.value=r(e)}}}function oe(e,t){let n=y({}),r=y(`none`),i=y(e),a=e.value?`mounted`:`unmounted`,o,s=t.value?.ownerDocument.defaultView??w,{state:c,dispatch:l}=ae(a,{mounted:{UNMOUNT:`unmounted`,ANIMATION_OUT:`unmountSuspended`},unmountSuspended:{MOUNT:`mounted`,ANIMATION_END:`unmounted`},unmounted:{MOUNT:`mounted`}}),u=e=>{if(E){let n=new CustomEvent(e,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(n)}};V(e,async(e,i)=>{let a=i!==e;if(await k(),a){let a=r.value,o=Z(t.value);e?(l(`MOUNT`),u(`enter`),o===`none`&&u(`after-enter`)):o===`none`||o===`undefined`||n.value?.display===`none`?(l(`UNMOUNT`),u(`leave`),u(`after-leave`)):i&&a!==o?(l(`ANIMATION_OUT`),u(`leave`)):(l(`UNMOUNT`),u(`after-leave`))}},{immediate:!0});let d=e=>{let n=Z(t.value),r=n.includes(CSS.escape(e.animationName)),a=c.value===`mounted`?`enter`:`leave`;if(e.target===t.value&&r&&(u(`after-${a}`),l(`ANIMATION_END`),!i.value)){let e=t.value.style.animationFillMode;t.value.style.animationFillMode=`forwards`,o=s?.setTimeout(()=>{t.value?.style.animationFillMode===`forwards`&&(t.value.style.animationFillMode=e)})}e.target===t.value&&n===`none`&&l(`ANIMATION_END`)},p=e=>{e.target===t.value&&(r.value=Z(t.value))},m=V(t,(e,t)=>{e?(n.value=getComputedStyle(e),e.addEventListener(`animationstart`,p),e.addEventListener(`animationcancel`,d),e.addEventListener(`animationend`,d)):(l(`ANIMATION_END`),o!==void 0&&s?.clearTimeout(o),t?.removeEventListener(`animationstart`,p),t?.removeEventListener(`animationcancel`,d),t?.removeEventListener(`animationend`,d))},{immediate:!0}),h=V(c,()=>{let e=Z(t.value);r.value=c.value===`mounted`?e:`none`});return f(()=>{m(),h()}),{isPresent:B(()=>[`mounted`,`unmountSuspended`].includes(c.value))}}function Z(e){return e&&getComputedStyle(e).animationName||`none`}var se=i({name:`Presence`,props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:n}){let{present:i,forceMount:a}=s(e),o=y(),{isPresent:c}=oe(i,o);n({present:c});let l=t.default({present:c.value});l=N(l||[]);let u=r();if(l&&l?.length>1){let e=u?.parent?.type.name?`<${u.parent.type.name} />`:`component`;throw Error([`Detected an invalid children for \`${e}\` for  \`Presence\` component.`,``,"Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.",`You can apply a few solutions:`,["Provide a single child element so that `presence` directive attach correctly.",`Ensure the first child is an actual element instead of a raw text node or comment node.`].map(e=>`  - ${e}`).join(`
`)].join(`
`))}return()=>a.value||i.value||c.value?A(t.default({present:c.value})[0],{ref:e=>{let t=j(e);return t?.hasAttribute===void 0||(t?.hasAttribute(`data-reka-popper-content-wrapper`)?o.value=t.firstElementChild:o.value=t),t}}):null}}),[Q,ce]=M(`CollapsibleRoot`),le=i({__name:`CollapsibleRoot`,props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`update:open`],setup(e,{expose:n,emit:r}){let i=e,a=T(i,`open`,r,{defaultValue:i.defaultOpen,passive:i.open===void 0}),{disabled:o,unmountOnHide:l}=s(i);return ce({contentId:``,disabled:o,open:a,unmountOnHide:l,onOpenToggle:()=>{o.value||(a.value=!a.value)}}),n({open:a}),F(),(e,n)=>(m(),z(v(O),{as:e.as,"as-child":i.asChild,"data-state":v(a)?`open`:`closed`,"data-disabled":v(o)?``:void 0},{default:t(()=>[c(e.$slots,`default`,{open:v(a)})]),_:3},8,[`as`,`as-child`,`data-state`,`data-disabled`]))}}),ue=i({inheritAttrs:!1,__name:`CollapsibleContent`,props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:[`contentFound`],setup(n,{emit:r}){let i=n,a=r,o=Q();o.contentId||=S(void 0,`reka-collapsible-content`);let s=y(),{forwardRef:l,currentElement:u}=F(),f=y(0),p=y(0),h=B(()=>o.open.value),b=y(h.value),x=y();V(()=>[h.value,s.value?.present],async()=>{await k();let e=u.value;if(!e)return;x.value=x.value||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration=`0s`,e.style.animationName=`none`;let t=e.getBoundingClientRect();p.value=t.height,f.value=t.width,b.value||(e.style.transitionDuration=x.value.transitionDuration,e.style.animationName=x.value.animationName)},{immediate:!0});let C=B(()=>b.value&&o.open.value);return d(()=>{requestAnimationFrame(()=>{b.value=!1})}),I(u,`beforematch`,e=>{requestAnimationFrame(()=>{o.onOpenToggle(),a(`contentFound`)})}),(n,r)=>(m(),z(v(se),{ref_key:`presentRef`,ref:s,present:n.forceMount||v(o).open.value,"force-mount":!0},{default:t(({present:r})=>[_(v(O),e(n.$attrs,{id:v(o).contentId,ref:v(l),"as-child":i.asChild,as:n.as,hidden:r?void 0:v(o).unmountOnHide.value?``:`until-found`,"data-state":C.value?void 0:v(o).open.value?`open`:`closed`,"data-disabled":v(o).disabled?.value?``:void 0,style:{"--reka-collapsible-content-height":`${p.value}px`,"--reka-collapsible-content-width":`${f.value}px`}}),{default:t(()=>[!v(o).unmountOnHide.value||r?c(n.$slots,`default`,{key:0}):g(`v-if`,!0)]),_:2},1040,[`id`,`as-child`,`as`,`hidden`,`data-state`,`data-disabled`,`style`])]),_:3},8,[`present`]))}}),de=i({__name:`CollapsibleTrigger`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`button`}},setup(e){let n=e;F();let r=Q();return(e,i)=>(m(),z(v(O),{type:e.as===`button`?`button`:void 0,as:e.as,"as-child":n.asChild,"aria-controls":v(r).contentId,"aria-expanded":v(r).open.value,"data-state":v(r).open.value?`open`:`closed`,"data-disabled":v(r).disabled?.value?``:void 0,disabled:v(r).disabled?.value,onClick:v(r).onOpenToggle},{default:t(()=>[c(e.$slots,`default`)]),_:3},8,[`type`,`as`,`as-child`,`aria-controls`,`aria-expanded`,`data-state`,`data-disabled`,`disabled`,`onClick`]))}}),fe=i({__name:`Collapsible`,props:{defaultOpen:{type:Boolean},open:{type:Boolean},disabled:{type:Boolean},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},emits:[`update:open`],setup(n,{emit:r}){let i=ne(n,r);return(n,r)=>(m(),z(v(le),e({"data-slot":`collapsible`},v(i)),{default:t(e=>[c(n.$slots,`default`,o(p(e)))]),_:3},16))}}),pe=i({__name:`CollapsibleContent`,props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(n){let r=n;return(n,i)=>(m(),z(v(ue),e({"data-slot":`collapsible-content`},r),{default:t(()=>[c(n.$slots,`default`)]),_:3},16))}}),me=i({__name:`CollapsibleTrigger`,props:{asChild:{type:Boolean},as:{}},setup(n){let r=n;return(n,i)=>(m(),z(v(de),e({"data-slot":`collapsible-trigger`},r),{default:t(()=>[c(n.$slots,`default`)]),_:3},16))}}),he={class:`truncate flex-1`},ge={key:1},_e={class:`flex items-center gap-2 px-2 py-1.5 text-sm rounded-md cursor-pointer hover:bg-accent transition-colors w-full text-left`},ve={class:`truncate`},ye={class:`pl-4 border-l border-border/50 ml-2`},be=i({name:`AsarFileTree`,__name:`asar-file-tree`,props:{node:{},selectedPath:{},modifiedFiles:{}},emits:[`select`],setup(e,{emit:r}){let i=e,o=r,s=`.js,.mjs,.cjs,.ts,.mts,.cts,.jsx,.tsx,.json,.html,.htm,.css,.scss,.sass,.less,.vue,.svelte,.md,.txt,.xml,.yaml,.yml,.env,.gitignore,.sh,.bash,.py,.sql`.split(`,`);function c(){i.node.isDirectory||o(`select`,i.node)}function d(e){return e.path===i.selectedPath}function f(e){return e.modified||(i.modifiedFiles?.has(e.path)??!1)}function p(e){return e.isDirectory?J:y(e.name)?G:q}function y(e){let t=e.substring(e.lastIndexOf(`.`)).toLowerCase();return s.includes(t)}return(r,i)=>{let s=u(`AsarFileTree`,!0);return e.node.isDirectory?(m(),n(`div`,ge,[_(v(fe),{class:`group/collapsible [&[data-state=open]>button>svg:first-child]:rotate-90`},{default:t(()=>[_(v(me),{"as-child":``},{default:t(()=>[C(`button`,_e,[_(v(U),{class:`w-4 h-4 transition-transform shrink-0`}),_(v(J),{class:`w-4 h-4 shrink-0`}),C(`span`,ve,l(e.node.name),1)])]),_:1}),_(v(pe),null,{default:t(()=>[C(`div`,ye,[(m(!0),n(L,null,a(e.node.children,t=>(m(),z(s,{key:t.path,node:t,"selected-path":e.selectedPath,"modified-files":e.modifiedFiles,onSelect:i[0]||=e=>o(`select`,e)},null,8,[`node`,`selected-path`,`modified-files`]))),128))])]),_:1})]),_:1})])):(m(),n(`div`,{key:0,class:b([`flex items-center gap-2 px-2 py-1.5 text-sm rounded-md cursor-pointer hover:bg-accent transition-colors`,d(e.node)?`bg-accent text-accent-foreground`:``]),onClick:c},[(m(),z(h(p(e.node)),{class:`w-4 h-4 shrink-0`})),C(`span`,he,l(e.node.name),1),f(e.node)?(m(),z(v(K),{key:0,class:`w-3 h-3 text-yellow-500 shrink-0`})):g(``,!0)],2))}}}),xe={class:`flex flex-col h-full`},Se={class:`p-4 border-b`},Ce={class:`flex items-center justify-between`},we={class:`flex items-center gap-2 min-w-0`},Te={class:`font-semibold truncate`},Ee={class:`flex-1 overflow-auto p-2`},$={class:`mb-2`},De={class:`space-y-0.5`},Oe={key:0,class:`mt-4`},ke={class:`px-2 space-y-1`},Ae={class:`font-medium`},je={class:`text-muted-foreground`},Me={class:`p-4 border-t space-y-2`},Ne={key:0,class:`text-xs text-muted-foreground mb-2`},Pe={key:1,class:`flex gap-2`},Fe=i({__name:`asar-sidebar`,setup(e){let{fileTree:r,currentFile:i,currentAsar:o,modifiedFiles:s,hasModifications:c,isRepacking:u,snapshots:d,openFile:f,resetAllFiles:p,downloadModifiedAsar:h,downloadOriginalAsar:b,createSnapshot:S,closeAsar:w}=re(),T=y(``),E=y(!1);function D(e){e.isDirectory||f(e.path)}async function O(){try{await h()}catch(e){console.error(`Download failed:`,e)}}async function k(){try{await b()}catch(e){console.error(`Download original failed:`,e)}}async function A(){if(confirm(`确定要清除所有修改吗？`))try{await p()}catch(e){console.error(`Reset failed:`,e)}}async function j(){if(T.value.trim())try{await S(T.value.trim()),T.value=``,E.value=!1}catch(e){console.error(`Create snapshot failed:`,e)}}function M(){c.value&&!confirm(`有未保存的修改，确定要关闭吗？`)||w()}return(e,f)=>(m(),n(`div`,xe,[C(`div`,Se,[C(`div`,Ce,[C(`div`,we,[_(v(Y),{class:`w-5 h-5 shrink-0`}),C(`span`,Te,l(v(o)?.name),1)]),_(v(P),{variant:`ghost`,size:`icon`,class:`shrink-0`,onClick:M},{default:t(()=>[_(v(ie),{class:`w-4 h-4`})]),_:1})])]),C(`div`,Ee,[C(`div`,$,[f[2]||=C(`div`,{class:`text-xs font-medium text-muted-foreground px-2 py-1`},`文件`,-1),C(`div`,De,[(m(!0),n(L,null,a(v(r),e=>(m(),z(be,{key:e.path,node:e,"selected-path":v(i),"modified-files":v(s),onSelect:D},null,8,[`node`,`selected-path`,`modified-files`]))),128))])]),v(d).length>0?(m(),n(`div`,Oe,[f[3]||=C(`div`,{class:`text-xs font-medium text-muted-foreground px-2 py-1`},`快照`,-1),C(`div`,ke,[(m(!0),n(L,null,a(v(d),e=>(m(),n(`div`,{key:e.id,class:`text-xs p-2 rounded bg-muted/50`},[C(`p`,Ae,l(e.name),1),C(`p`,je,l(new Date(e.createdAt).toLocaleString()),1)]))),128))])])):g(``,!0)]),C(`div`,Me,[v(c)?(m(),n(`div`,Ne,` 已修改 `+l(v(s).size)+` 个文件 `,1)):g(``,!0),E.value?(m(),n(`div`,Pe,[_(v(te),{modelValue:T.value,"onUpdate:modelValue":f[0]||=e=>T.value=e,placeholder:`快照名称`,class:`flex-1`,onKeyup:x(j,[`enter`])},null,8,[`modelValue`]),_(v(P),{size:`icon`,onClick:j,disabled:!T.value.trim()},{default:t(()=>[_(v(H),{class:`w-4 h-4`})]),_:1},8,[`disabled`])])):g(``,!0),v(c)&&!E.value?(m(),z(v(P),{key:2,variant:`outline`,class:`w-full`,onClick:f[1]||=e=>E.value=!0},{default:t(()=>[_(v(H),{class:`w-4 h-4 mr-2`}),f[4]||=R(` 创建快照 `,-1)]),_:1})):g(``,!0),_(v(P),{class:`w-full`,disabled:!v(c)||v(u),onClick:O},{default:t(()=>[v(u)?(m(),z(v(ee),{key:0,class:`w-4 h-4 mr-2 animate-spin`})):(m(),z(v(W),{key:1,class:`w-4 h-4 mr-2`})),f[5]||=R(` 下载修改后的 ASAR `,-1)]),_:1},8,[`disabled`]),_(v(P),{variant:`outline`,class:`w-full`,onClick:k},{default:t(()=>[_(v(W),{class:`w-4 h-4 mr-2`}),f[6]||=R(` 下载原始 ASAR `,-1)]),_:1}),v(c)?(m(),z(v(P),{key:3,variant:`destructive`,class:`w-full`,onClick:A},{default:t(()=>[_(v(X),{class:`w-4 h-4 mr-2`}),f[7]||=R(` 清除所有修改 `,-1)]),_:1})):g(``,!0)])]))}});export{Fe as default};
//# sourceMappingURL=asar-sidebar-BAuYrqib.js.map