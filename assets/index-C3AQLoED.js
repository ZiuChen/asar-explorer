const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/asar-sidebar-BmKYg7R0.js","assets/vendor_@vue_reactivity@3.6.0-alpha.6-DZKOJXGm.js","assets/vendor_@vue_runtime-core@3.6.0-alpha.6-BjE3k_Rr.js","assets/vendor_@vue_runtime-dom@3.6.0-alpha.6-DIxWpe74.js","assets/vendor_@vue_runtime-vapor@3.6.0-alpha.6_@vue_runtime-dom@3.6.0-alpha.6-GqVkSY40.js","assets/vendor_@vueuse_core@12.8.2_typescript@5.9.3-DL4gLfcS.js","assets/rolldown-runtime-CMO3aZVE.js","assets/vendor_@vueuse_core@14.1.0_vue@3.6.0-alpha.6_typescript@5.9.3_-CBTGw1FF.js","assets/vendor_class-variance-authority@0.7.1-CpkMJyQz.js","assets/vendor_crypto-js@4.2.0-aSEXufgj.js","assets/vendor_idb@8.0.3-CGNuP9rx.js","assets/vendor_lucide-vue-next@0.560.0_vue@3.6.0-alpha.6_typescript@5.9.3_-D6c1sQFP.js","assets/vendor_nanoid@5.1.6-Cg4b_36K.js","assets/vendor_reka-ui@2.6.1_typescript@5.9.3_vue@3.6.0-alpha.6_typescript@5.9.3_-Cg17xr5T.js","assets/vendor_tailwind-merge@3.4.0-C3EvnfGD.js"])))=>i.map(i=>d[i]);
import{It as e,M as t,Pt as n,T as r,Vt as i,W as a,_ as o,h as s}from"./vendor_@vue_reactivity@3.6.0-alpha.6-DZKOJXGm.js";import{B as c,Jt as l,M as u,O as d,Rt as f,T as p,U as m,W as h,Wt as g,ar as _,en as v,j as y,k as b,lt as x,mn as S,pn as C,rr as w,s as T,z as E}from"./vendor_@vue_runtime-core@3.6.0-alpha.6-BjE3k_Rr.js";import{U as D,Y as O,l as k}from"./vendor_@vue_runtime-dom@3.6.0-alpha.6-DIxWpe74.js";import{st as A}from"./vendor_@vue_runtime-vapor@3.6.0-alpha.6_@vue_runtime-dom@3.6.0-alpha.6-GqVkSY40.js";import"./vendor_@vueuse_core@12.8.2_typescript@5.9.3-DL4gLfcS.js";import{c as j,l as M,n as N,o as ee,r as P,s as F}from"./vendor_lucide-vue-next@0.560.0_vue@3.6.0-alpha.6_typescript@5.9.3_-D6c1sQFP.js";import{n as I,t as L}from"./vendor_class-variance-authority@0.7.1-CpkMJyQz.js";import{c as R,l as te,n as ne,r as re,s as ie,t as ae}from"./vendor_reka-ui@2.6.1_typescript@5.9.3_vue@3.6.0-alpha.6_typescript@5.9.3_-Cg17xr5T.js";import{t as oe}from"./vendor_tailwind-merge@3.4.0-C3EvnfGD.js";import{n as se,r as z,t as ce}from"./vendor_@vueuse_core@14.1.0_vue@3.6.0-alpha.6_typescript@5.9.3_-CBTGw1FF.js";import{t as le}from"./vendor_idb@8.0.3-CGNuP9rx.js";import{n as ue,r as de,t as fe}from"./vendor_modern-monaco@0.3.6_typescript@5.9.3-CFqZ7Evl.js";import{t as pe}from"./vendor_crypto-js@4.2.0-aSEXufgj.js";import{t as me}from"./vendor_nanoid@5.1.6-Cg4b_36K.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function B(...e){return oe(I(e))}var V=h({__name:`Button`,props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:`button`}},setup(e){let t=e;return(r,i)=>(v(),b(a(ie),{"data-slot":`button`,as:e.as,"as-child":e.asChild,class:n(a(B)(a(he)({variant:e.variant,size:e.size}),t.class))},{default:w(()=>[S(r.$slots,`default`)]),_:3},8,[`as`,`as-child`,`class`]))}});const he=L(`inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,{variants:{variant:{default:`bg-primary text-primary-foreground hover:bg-primary/90`,destructive:`bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60`,outline:`border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50`,secondary:`bg-secondary text-secondary-foreground hover:bg-secondary/80`,ghost:`hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50`,link:`text-primary underline-offset-4 hover:underline`},size:{default:`h-9 px-4 py-2 has-[>svg]:px-3`,sm:`h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5`,lg:`h-10 rounded-md px-6 has-[>svg]:px-4`,icon:`size-9`,"icon-sm":`size-8`,"icon-lg":`size-10`}},defaultVariants:{variant:`default`,size:`default`}});var H=h({__name:`Input`,props:{defaultValue:{},modelValue:{},class:{}},emits:[`update:modelValue`],setup(e,{emit:t}){let r=e,i=ce(r,`modelValue`,t,{passive:!0,defaultValue:r.defaultValue});return(e,t)=>_((v(),u(`input`,{"onUpdate:modelValue":t[0]||=e=>s(i)?i.value=e:null,"data-slot":`input`,class:n(a(B)(`file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm`,`focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]`,`aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive`,r.class))},null,2)),[[D,a(i)]])}}),ge=`asar-explorer`,_e=1,U=null;function W(){return U||=le(ge,_e,{upgrade(e){if(!e.objectStoreNames.contains(`asars`)){let t=e.createObjectStore(`asars`,{keyPath:`id`});t.createIndex(`by-name`,`name`),t.createIndex(`by-importedAt`,`importedAt`),t.createIndex(`by-hash`,`hash`)}if(e.objectStoreNames.contains(`asar-data`)||e.createObjectStore(`asar-data`,{keyPath:`id`}),!e.objectStoreNames.contains(`snapshots`)){let t=e.createObjectStore(`snapshots`,{keyPath:`id`});t.createIndex(`by-asarId`,`asarId`),t.createIndex(`by-createdAt`,`createdAt`)}if(!e.objectStoreNames.contains(`modifications`)){let t=e.createObjectStore(`modifications`,{keyPath:`id`});t.createIndex(`by-asarId`,`asarId`),t.createIndex(`by-snapshotId`,`snapshotId`),t.createIndex(`by-path`,`path`),t.createIndex(`by-asarId-path`,[`asarId`,`path`])}}}),U}async function ve(e,t){let n=(await W()).transaction([`asars`,`asar-data`],`readwrite`);await Promise.all([n.objectStore(`asars`).put(e),n.objectStore(`asar-data`).put({id:e.id,data:new Uint8Array(t)}),n.done])}async function ye(e){return(await W()).get(`asars`,e)}async function be(e){let t=await(await W()).get(`asar-data`,e);return t?t.data.buffer:null}async function xe(){let e=await W(),t=await e.getAllFromIndex(`asars`,`by-importedAt`);t.reverse();let n=[];for(let r of t){let t=await e.countFromIndex(`snapshots`,`by-asarId`,r.id),i=await e.countFromIndex(`modifications`,`by-asarId`,r.id);n.push({...r,snapshotCount:t,modifiedFileCount:i})}return n}async function Se(e){return(await W()).getFromIndex(`asars`,`by-hash`,e)}async function Ce(e){let t=(await W()).transaction([`asars`,`asar-data`,`snapshots`,`modifications`],`readwrite`);await t.objectStore(`asars`).delete(e),await t.objectStore(`asar-data`).delete(e);let n=await t.objectStore(`snapshots`).index(`by-asarId`).openCursor(e);for(;n;)await n.delete(),n=await n.continue();let r=await t.objectStore(`modifications`).index(`by-asarId`).openCursor(e);for(;r;)await r.delete(),r=await r.continue();await t.done}async function we(e){await(await W()).add(`snapshots`,e)}async function Te(e){return(await(await W()).getAllFromIndex(`snapshots`,`by-asarId`,e)).sort((e,t)=>t.createdAt-e.createdAt)}async function Ee(e){let t=(await W()).transaction([`snapshots`,`modifications`],`readwrite`);await t.objectStore(`snapshots`).delete(e);let n=await t.objectStore(`modifications`).index(`by-snapshotId`).openCursor(e);for(;n;)await n.delete(),n=await n.continue();await t.done}async function De(e){let t=(await W()).transaction(`modifications`,`readwrite`),n=t.objectStore(`modifications`),r=await n.index(`by-asarId-path`).openCursor([e.asarId,e.path]);for(;r;)await r.delete(),r=await r.continue();await n.add(e),await t.done}async function Oe(e,t){return(await W()).getFromIndex(`modifications`,`by-asarId-path`,[e,t])}async function ke(e){return(await W()).getAllFromIndex(`modifications`,`by-asarId`,e)}async function Ae(e,t){let n=(await W()).transaction(`modifications`,`readwrite`),r=await n.objectStore(`modifications`).index(`by-asarId-path`).openCursor([e,t]);for(;r;)await r.delete(),r=await r.continue();await n.done}async function je(e){let t=(await W()).transaction(`modifications`,`readwrite`),n=await t.objectStore(`modifications`).index(`by-asarId`).openCursor(e);for(;n;)await n.delete(),n=await n.continue();await t.done}const G={saveAsar:ve,getAsarMeta:ye,getAsarData:be,getAllAsarHistory:xe,findAsarByHash:Se,deleteAsar:Ce,createSnapshot:we,getSnapshots:Te,deleteSnapshot:Ee,saveModification:De,getModification:Oe,getAllModifications:ke,deleteModification:Ae,clearModifications:je};var K=null,Me=0,q=new Map;function J(){return K||(K=new Worker(new URL(`/asar-explorer/assets/worker-CT2nJRkM.js`,``+import.meta.url),{type:`module`}),K.onmessage=e=>{let t=e.data,n=q.get(t.id);n&&(q.delete(t.id),t.type===`error`?n.reject(Error(t.error)):n.resolve(t.result))},K.onerror=e=>{console.error(`Worker error:`,e)}),K}function Y(e,t,n){return new Promise((r,i)=>{let a=++Me;q.set(a,{resolve:r,reject:i});let o={type:e,id:a,...t};n?J().postMessage(o,n):J().postMessage(o)})}async function Ne(e){let t=e.slice(0);return Y(`parseHeader`,{data:t},[t])}async function X(e,t){return Y(`extractFile`,{data:e,path:t})}async function Pe(e,t){let n=e.slice(0);return Y(`modifyPackage`,{data:n,modifications:t},[n])}var Fe=pe();function Z(e=``,t=21){return`${e}_${me(t)}`}async function Ie(e){if(typeof crypto<`u`&&`subtle`in crypto){let t=await crypto.subtle.digest(`SHA-256`,e);return Array.from(new Uint8Array(t)).map(e=>e.toString(16).padStart(2,`0`)).join(``)}return(0,Fe.SHA256)(new Uint8Array(e)).toString()}var Q={Unknown:0,File:1,Directory:2,SymbolicLink:64},Le=class{constructor(){this.watchers=[],this.asarData=null,this.asarId=null,this.root=this.createDirectoryNode()}createDirectoryNode(){let e=Date.now();return{type:Q.Directory,children:new Map,size:0,ctime:e,mtime:e,version:1,fromAsar:!1}}createFileNode(e,t=!1){let n=Date.now();return{type:Q.File,content:e,size:e.length,ctime:n,mtime:n,version:1,fromAsar:t}}normalizePath(e){return e.replace(/^file:\/\//,``).replace(/^\/+/,``).replace(/\/+$/,``).replace(/\/+/g,`/`)}getPathParts(e){let t=this.normalizePath(e);return t?t.split(`/`):[]}getParentPath(e){let t=this.getPathParts(e);return t.pop(),t.join(`/`)}getFileName(e){let t=this.getPathParts(e);return t[t.length-1]||``}getNode(e){let t=this.getPathParts(e),n=this.root;for(let e of t){if(n.type!==Q.Directory||!n.children)return null;let t=n.children.get(e);if(!t)return null;n=t}return n}getOrCreateParent(e){let t=this.getParentPath(e),n=this.getPathParts(t),r=this.root;for(let e of n){r.children||=new Map;let t=r.children.get(e);t||(t=this.createDirectoryNode(),r.children.set(e,t)),r=t}return r}notifyWatchers(e,t,n=Q.File,r){let i=this.normalizePath(t);for(let a of this.watchers){let o=this.normalizePath(a.path);a.recursive?(i.startsWith(o)||o===``||i===o)&&a.handle(e,t,n,r):(this.getParentPath(i)===o||o===``&&!i.includes(`/`))&&a.handle(e,t,n,r)}}async loadFromAsar(e,t){this.asarData=e,this.asarId=t,this.root=this.createDirectoryNode();let{files:n}=await Ne(e);for(let e of n){let t=e.path.replace(/^\//,``).split(`/`).filter(Boolean),n=this.root;for(let e=0;e<t.length-1;e++){let r=t[e];n.children||=new Map;let i=n.children.get(r);i||(i=this.createDirectoryNode(),i.fromAsar=!0,n.children.set(r,i)),n=i}let r=t[t.length-1];if(r&&n.children){let t={type:Q.File,size:e.size||0,ctime:Date.now(),mtime:Date.now(),version:1,fromAsar:!0,asarOffset:e.fileOffset};n.children.set(r,t)}}let r=await G.getAllModifications(t);for(let e of r){let t=e.path.replace(/^\//,``);await this.writeFile(t,e.content,{isModelContentChange:!1})}}clear(){this.root=this.createDirectoryNode(),this.asarData=null,this.asarId=null}getAsarId(){return this.asarId}async copy(e,t,n){if(!this.getNode(e))throw Error(`Source not found: ${e}`);if(this.getNode(t)&&!n?.overwrite)throw Error(`Target already exists: ${t}`);let r=await this.readFile(e);await this.writeFile(t,r)}async createDirectory(e){let t=this.getPathParts(e),n=this.root;for(let r of t){n.children||=new Map;let t=n.children.get(r);t||(t=this.createDirectoryNode(),n.children.set(r,t),this.notifyWatchers(`create`,e,Q.Directory)),n=t}}async delete(e,t){let n=this.getParentPath(e),r=this.getFileName(e),i=this.getNode(n);if(!i||!i.children)throw Error(`Not found: ${e}`);let a=i.children.get(r);if(!a)throw Error(`Not found: ${e}`);if(a.type===Q.Directory&&a.children?.size&&!t?.recursive)throw Error(`Directory not empty: ${e}`);i.children.delete(r),this.notifyWatchers(`remove`,e,a.type)}async readDirectory(e){let t=this.getNode(e);if(!t)throw Error(`Not found: ${e}`);if(t.type!==Q.Directory||!t.children)throw Error(`Not a directory: ${e}`);let n=[];for(let[e,r]of t.children)n.push([e,r.type]);return n.sort((e,t)=>e[1]===t[1]?e[0].localeCompare(t[0]):e[1]===Q.Directory?-1:1)}async readFile(e){let t=this.getNode(e);if(!t)throw Error(`Not found: ${e}`);if(t.type!==Q.File)throw Error(`Not a file: ${e}`);if(t.content)return t.content;if(t.fromAsar&&this.asarData){let n=await X(this.asarData,`/`+this.normalizePath(e));return t.content=new Uint8Array(n),t.content}throw Error(`Content not available: ${e}`)}async readTextFile(e){let t=await this.readFile(e);return new TextDecoder(`utf-8`).decode(t)}async rename(e,t,n){await this.copy(e,t,n),await this.delete(e,{recursive:!0})}async stat(e){let t=this.getNode(e);if(!t)throw Error(`Not found: ${e}`);return{type:t.type,ctime:t.ctime,mtime:t.mtime,version:t.version,size:t.size}}async writeFile(e,t,n){let r=typeof t==`string`?new TextEncoder().encode(t):t,i=this.getOrCreateParent(e),a=this.getFileName(e);i.children||=new Map;let o=i.children.get(a),s=!o,c=Date.now(),l=o&&o.type===Q.File?{...o,content:r,size:r.length,mtime:c,version:o.version+1,fromAsar:!1}:this.createFileNode(r,!1);if(i.children.set(a,l),this.asarId&&n?.isModelContentChange!==!1){let t={id:Z(`M`),asarId:this.asarId,path:`/`+this.normalizePath(e),content:r,modifiedAt:c};await G.saveModification(t)}this.notifyWatchers(s?`create`:`modify`,e,Q.File,n)}watch(e,t,n){let r,i;typeof t==`function`?(r={recursive:!1},i=t):(r=t,i=n);let a={path:this.normalizePath(e),recursive:r.recursive,handle:i};return this.watchers.push(a),()=>{let e=this.watchers.indexOf(a);e!==-1&&this.watchers.splice(e,1)}}isModified(e){let t=this.getNode(e);return t?!t.fromAsar:!1}getModifiedFiles(){let e=[],t=(n,r)=>{if(n.type===Q.File&&!n.fromAsar&&e.push(r),n.children)for(let[e,i]of n.children)t(i,r?`${r}/${e}`:e)};return t(this.root,``),e}async resetFile(e){if(!this.asarData||!this.asarId)throw Error(`No ASAR loaded`);let t=this.getNode(e);if(!t||t.type!==Q.File)throw Error(`Not a file: ${e}`);let n=await X(this.asarData,`/`+this.normalizePath(e));t.content=new Uint8Array(n),t.fromAsar=!0,t.mtime=Date.now(),t.version++,await G.deleteModification(this.asarId,`/`+this.normalizePath(e)),this.notifyWatchers(`modify`,e,Q.File)}getFileTree(){let e=(t,n)=>{if(!t.children)return[];let r=[];for(let[i,a]of t.children){let t=n?`${n}/${i}`:i,o={name:i,path:`/`+t,isDirectory:a.type===Q.Directory};a.type===Q.Directory?o.children=e(a,t):(o.size=a.size,o.modified=!a.fromAsar),r.push(o)}return r.sort((e,t)=>e.isDirectory===t.isDirectory?e.name.localeCompare(t.name):e.isDirectory?-1:1)};return e(this.root,``)}};const $=se(()=>{let e=new Le,n=null,i=r(null),a=t([]),s=r(null),c=r(!1),l=r(!1),u=r(!1),d=r(null),f=r(new Set),m=t([]),h=t([]),g=r(!1),_=p(()=>f.value.size>0),v=p(()=>i.value!==null);function y(e){n=e?o(e):null}function b(e){g.value=e}async function x(){try{m.value=await G.getAllAsarHistory()}catch(e){console.error(`Failed to load history:`,e)}}async function S(e){try{c.value=!0,d.value=null,await T(await e.arrayBuffer(),e.name,`file`)}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}finally{c.value=!1}}async function C(e){try{c.value=!0,d.value=null;let t,n,r;if(e.startsWith(`data:`)){n=`data-url.asar`,r=`data-url`;let i=e.split(`,`)[1]||``,a=atob(i),o=new Uint8Array(a.length);for(let e=0;e<a.length;e++)o[e]=a.charCodeAt(e);t=o.buffer}else{n=new URL(e).pathname.split(`/`).pop()||`remote.asar`,r=`url`;let i=await fetch(e);if(!i.ok)throw Error(`Failed to fetch: ${i.status} ${i.statusText}`);t=await i.arrayBuffer()}await T(t,n,r,e)}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}finally{c.value=!1}}async function w(t){try{c.value=!0,d.value=null;let n=await G.getAsarMeta(t);if(!n)throw Error(`ASAR not found in history`);let r=await G.getAsarData(t);if(!r)throw Error(`ASAR data not found`);await e.loadFromAsar(r,t),i.value=n,a.value=e.getFileTree(),f.value=new Set(e.getModifiedFiles()),s.value=null,await j(),n.lastModifiedAt=Date.now(),await G.saveAsar(n,r),await x()}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}finally{c.value=!1}}async function T(t,n,r,o){let c=await Ie(t),l=await G.findAsarByHash(c),u;l?(u=l.id,l.lastModifiedAt=Date.now(),await G.saveAsar(l,t)):(u=Z(`R`),l={id:u,name:n,size:t.byteLength,importedAt:Date.now(),lastModifiedAt:Date.now(),source:r,sourceUrl:o,hash:c},await G.saveAsar(l,t)),await e.loadFromAsar(t,u),i.value=l,a.value=e.getFileTree(),f.value=new Set(e.getModifiedFiles()),s.value=null,await j(),await x()}function E(){e.clear(),i.value=null,a.value=[],f.value=new Set,s.value=null,h.value=[]}async function D(e){if(!n)throw Error(`Editor not initialized`);try{let t=e.replace(/^\/+/,``);await n.openTextDocument(t),s.value=e}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}}async function O(){f.value=new Set(e.getModifiedFiles()),a.value=e.getFileTree()}async function k(t){try{await e.resetFile(t.replace(/^\/+/,``)),f.value=new Set(e.getModifiedFiles()),a.value=e.getFileTree(),s.value===t&&await D(t)}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}}async function A(){if(i.value)try{await G.clearModifications(i.value.id);let t=await G.getAsarData(i.value.id);t&&(await e.loadFromAsar(t,i.value.id),a.value=e.getFileTree(),f.value=new Set,s.value&&await D(s.value))}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}}async function j(){if(!i.value){h.value=[];return}try{h.value=await G.getSnapshots(i.value.id)}catch(e){console.error(`Failed to load snapshots:`,e),h.value=[]}}async function M(e,t){if(!i.value)throw Error(`No ASAR loaded`);let n={id:Z(`S`),asarId:i.value.id,name:e,createdAt:Date.now(),modifiedFiles:Array.from(f.value),description:t};await G.createSnapshot(n),await j()}async function N(e){await G.deleteSnapshot(e),await j()}async function ee(){if(!i.value)throw Error(`No ASAR loaded`);try{u.value=!0,d.value=null;let e=await G.getAsarData(i.value.id);if(!e)throw Error(`Original ASAR data not found`);let t=await G.getAllModifications(i.value.id),n={};for(let e of t)n[e.path]=e.content;let r=await Pe(e,n),a=new Blob([r.buffer],{type:`application/octet-stream`}),o=URL.createObjectURL(a),s=document.createElement(`a`);s.href=o,s.download=i.value.name.replace(`.asar`,`-modified.asar`),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}catch(e){throw d.value=e instanceof Error?e.message:String(e),e}finally{u.value=!1}}async function P(){if(!i.value)throw Error(`No ASAR loaded`);let e=await G.getAsarData(i.value.id);if(!e)throw Error(`ASAR data not found`);let t=new Blob([e],{type:`application/octet-stream`}),n=URL.createObjectURL(t),r=document.createElement(`a`);r.href=n,r.download=i.value.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function F(e){i.value?.id===e&&E(),await G.deleteAsar(e),await x()}function I(){return n}function L(){return e}function R(){a.value=e.getFileTree(),f.value=new Set(e.getModifiedFiles())}return x().catch(console.error),{currentAsar:i,fileTree:a,currentFile:s,isLoadingAsar:c,isSaving:l,isRepacking:u,error:d,modifiedFiles:f,asarHistory:m,snapshots:h,isEditorReady:g,hasModifications:_,asarLoaded:v,setWorkspace:y,setEditorReady:b,loadHistory:x,loadFromFile:S,loadFromUrl:C,loadFromHistory:w,closeAsar:E,openFile:D,saveCurrentFile:O,resetFile:k,resetAllFiles:A,createSnapshot:M,deleteSnapshot:N,downloadModifiedAsar:ee,downloadOriginalAsar:P,deleteFromHistory:F,getWorkspace:I,getFileSystem:L,refreshFileTree:R}});var Re={key:0,class:`text-destructive text-center max-w-md`},ze={key:1,class:`w-full space-y-4`},Be={class:`flex gap-2`},Ve={key:0,class:`mt-6`},He={key:0,class:`mt-4 space-y-2 max-h-60 overflow-y-auto`},Ue=[`onClick`],We={class:`flex-1 min-w-0`},Ge={class:`font-medium truncate`},Ke={class:`text-xs text-muted-foreground`},qe={key:0,class:`ml-2 text-orange-500`},Je={key:2,class:`flex items-center gap-2`},Ye=h({__name:`asar-uploader`,setup(e){let{loadFromFile:t,loadFromUrl:n,loadFromHistory:o,deleteFromHistory:s,asarHistory:f,loadHistory:p,isLoadingAsar:m,error:h}=$(),g=r(``),_=r(null),b=r(!1);l(()=>{p()});function x(){_.value?.click()}async function S(e){let n=e.target,r=n.files?.[0];if(r)try{await t(r)}catch(e){console.error(`Failed to load file:`,e)}finally{n.value=``}}async function D(){if(g.value.trim())try{await n(g.value.trim()),g.value=``}catch(e){console.error(`Failed to load from URL:`,e)}}function k(e){e.preventDefault(),e.dataTransfer.dropEffect=`copy`}async function A(e){e.preventDefault();let n=e.dataTransfer?.files[0];if(!(!n||!n.name.endsWith(`.asar`)))try{await t(n)}catch(e){console.error(`Failed to load dropped file:`,e)}}async function M(e){try{await o(e)}catch(e){console.error(`Failed to load from history:`,e)}}async function I(e,t){t.stopPropagation(),confirm(`确定要删除这条历史记录吗？`)&&await s(e)}function L(e){return e<1024?e+` B`:e<1024*1024?(e/1024).toFixed(1)+` KB`:(e/(1024*1024)).toFixed(1)+` MB`}function R(e){return new Date(e).toLocaleString()}return(e,t)=>(v(),u(`div`,{class:`flex flex-col items-center justify-center min-h-[400px] p-8 space-y-8 w-full max-w-2xl`,onDragover:k,onDrop:A},[t[7]||=d(`div`,{class:`text-center space-y-2`},[d(`h1`,{class:`text-3xl font-bold`},`ASAR Explorer`),d(`p`,{class:`text-muted-foreground`},`在线预览和编辑 Electron ASAR 文件`)],-1),a(h)?(v(),u(`div`,Re,i(a(h)),1)):y(``,!0),a(m)?y(``,!0):(v(),u(`div`,ze,[d(`div`,{class:`border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center hover:border-muted-foreground/50 transition-colors cursor-pointer`,onClick:x},[c(a(N),{class:`w-12 h-12 mx-auto mb-4 text-muted-foreground`}),t[2]||=d(`p`,{class:`text-lg font-medium`},`点击或拖放 ASAR 文件`,-1),t[3]||=d(`p`,{class:`text-sm text-muted-foreground mt-1`},`支持 .asar 格式文件`,-1),d(`input`,{ref_key:`fileInputRef`,ref:_,type:`file`,accept:`.asar`,class:`hidden`,onChange:S},null,544)]),t[5]||=d(`div`,{class:`flex items-center gap-4`},[d(`div`,{class:`flex-1 h-px bg-border`}),d(`span`,{class:`text-sm text-muted-foreground`},`或`),d(`div`,{class:`flex-1 h-px bg-border`})],-1),d(`div`,Be,[c(a(H),{modelValue:g.value,"onUpdate:modelValue":t[0]||=e=>g.value=e,placeholder:`输入 ASAR 文件 URL...`,class:`flex-1`,onKeyup:O(D,[`enter`])},null,8,[`modelValue`]),c(a(V),{onClick:D,disabled:!g.value.trim()},{default:w(()=>[c(a(F),{class:`w-4 h-4 mr-2`}),t[4]||=E(` 加载 `,-1)]),_:1},8,[`disabled`])]),a(f).length>0?(v(),u(`div`,Ve,[d(`button`,{class:`flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full justify-center`,onClick:t[1]||=e=>b.value=!b.value},[c(a(j),{class:`w-4 h-4`}),d(`span`,null,`历史记录 (`+i(a(f).length)+`)`,1)]),b.value?(v(),u(`div`,He,[(v(!0),u(T,null,C(a(f),e=>(v(),u(`div`,{key:e.id,class:`flex items-center justify-between p-3 rounded-lg border hover:bg-accent cursor-pointer transition-colors`,onClick:t=>M(e.id)},[d(`div`,We,[d(`p`,Ge,i(e.name),1),d(`p`,Ke,[E(i(L(e.size))+` · `+i(R(e.lastModifiedAt))+` `,1),e.modifiedFileCount>0?(v(),u(`span`,qe,i(e.modifiedFileCount)+` 处修改 `,1)):y(``,!0)])]),c(a(V),{variant:`ghost`,size:`icon`,class:`shrink-0 ml-2`,onClick:t=>I(e.id,t)},{default:w(()=>[c(a(P),{class:`w-4 h-4 text-muted-foreground hover:text-destructive`})]),_:1},8,[`onClick`])],8,Ue))),128))])):y(``,!0)])):y(``,!0)])),a(m)?(v(),u(`div`,Je,[c(a(ee),{class:`w-5 h-5 animate-spin`}),t[6]||=d(`span`,null,`正在加载 ASAR 文件...`,-1)])):y(``,!0)],32))}}),Xe=((e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n})(h({__name:`monaco-editor`,setup(e){let t=r(null),{getFileSystem:n,setWorkspace:i,setEditorReady:a,error:o}=$(),s=null;return l(async()=>{if(t.value)try{s=new ue({name:`asar-explorer`,customFS:n()}),await fe({workspace:s,theme:`nord`}),i(s),a(!0),console.log(`Monaco editor initialized`)}catch(e){console.error(`Failed to initialize editor:`,e),o.value=e instanceof Error?e.message:String(e)}}),g(()=>{s&&(s=null,i(null),a(!1))}),(e,n)=>(v(),u(`div`,{ref_key:`containerRef`,ref:t,class:`monaco-container`},[...n[0]||=[d(`monaco-editor`,{class:`w-full h-full`},null,-1)]],512))}}),[[`__scopeId`,`data-v-bf3bd132`]]),Ze={key:0,class:`bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border`},Qe=h({__name:`ResizableHandle`,props:{id:{},hitAreaMargins:{},tabindex:{},disabled:{type:Boolean},nonce:{},asChild:{type:Boolean},as:{},class:{},withHandle:{type:Boolean}},emits:[`dragging`],setup(e,{emit:t}){let n=e,r=t,i=R(z(n,`class`,`withHandle`),r);return(e,t)=>(v(),b(a(ae),f({"data-slot":`resizable-handle`},a(i),{class:a(B)(`bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[orientation=vertical]:h-px data-[orientation=vertical]:w-full data-[orientation=vertical]:after:left-0 data-[orientation=vertical]:after:h-1 data-[orientation=vertical]:after:w-full data-[orientation=vertical]:after:-translate-y-1/2 data-[orientation=vertical]:after:translate-x-0 [&[data-orientation=vertical]>div]:rotate-90`,n.class)}),{default:w(()=>[n.withHandle?(v(),u(`div`,Ze,[S(e.$slots,`default`,{},()=>[c(a(M),{class:`size-2.5`})])])):y(``,!0)]),_:3},16,[`class`]))}}),$e=h({__name:`ResizablePanel`,props:{collapsedSize:{},collapsible:{type:Boolean},defaultSize:{},id:{},maxSize:{},minSize:{},order:{},asChild:{type:Boolean},as:{}},emits:[`collapse`,`expand`,`resize`],setup(t,{emit:n}){let r=R(t,n);return te(),(t,n)=>(v(),b(a(ne),f({"data-slot":`resizable-panel`},a(r)),{default:w(n=>[S(t.$slots,`default`,e(x(n)))]),_:3},16))}}),et=h({__name:`ResizablePanelGroup`,props:{id:{},autoSaveId:{},direction:{},keyboardResizeBy:{},storage:{},asChild:{type:Boolean},as:{},class:{}},emits:[`layout`],setup(t,{emit:n}){let r=t,i=n,o=R(z(r,`class`),i);return(t,n)=>(v(),b(a(re),f({"data-slot":`resizable-panel-group`},a(o),{class:a(B)(`flex h-full w-full data-[orientation=vertical]:flex-col`,r.class)}),{default:w(n=>[S(t.$slots,`default`,e(x(n)))]),_:3},16,[`class`]))}}),tt={key:0,class:`min-h-screen flex items-center justify-center bg-background`},nt={class:`flex h-12 shrink-0 items-center gap-2 border-b px-4`},rt={key:0,class:`text-sm font-medium ml-2`},it={class:`flex-1 min-h-0 relative`};k(h({__name:`App`,setup(e){let t=m(()=>de(()=>import(`./asar-sidebar-BmKYg7R0.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),{asarLoaded:n,currentFile:r}=$();return(e,o)=>a(n)?(v(),b(a(et),{key:1,direction:`horizontal`,class:`h-screen`},{default:w(()=>[c(a($e),{"default-size":25,"min-size":25,"max-size":50,class:`bg-sidebar`},{default:w(()=>[c(a(t))]),_:1}),c(a(Qe),{"with-handle":``}),c(a($e),{"default-size":80,class:`flex flex-col h-screen`},{default:w(()=>[d(`header`,nt,[o[0]||=d(`span`,{class:`text-sm text-muted-foreground`},`ASAR Explorer`,-1),a(r)?(v(),u(`span`,rt,i(a(r)),1)):y(``,!0)]),d(`main`,it,[c(Xe,{class:`absolute inset-0`})])]),_:1})]),_:1})):(v(),u(`div`,tt,[c(Ye)]))}})).use(A).mount(`#app`);export{H as n,V as r,$ as t};
//# sourceMappingURL=index-C3AQLoED.js.map